{"remainingRequest":"C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\src\\views\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\src\\views\\Users.vue","mtime":1603189394148},{"path":"C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jonha\\Google Drive\\Skole\\Programutvikling\\INF319\\Virtual tours\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOw0KaW1wb3J0ICogYXMgZmIgZnJvbSAiLi4vZmlyZWJhc2UiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB1c2VyczogW10sDQogICAgfTsNCiAgfSwNCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgew0KICAgIHRoaXMuZmV0Y2hVc2VycygpOw0KICAgIGNvbnNvbGUuaW5mbygibW91bnRlZCwgdXNlcnM6IiwgdGhpcy51c2Vycyk7DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoWyJ1c2VyUHJvZmlsZSIsICJ1c2VycyJdKSwNCiAgICBpdGVtczogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIHRoaXMudXNlcnM7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGZldGNoVXNlcnMoKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCB7IGRvY3MgfSA9IGF3YWl0IGZiLnVzZXJzQ29sbGVjdGlvbi5nZXQoKTsNCg0KICAgICAgICB0aGlzLnVzZXJzID0gZG9jcy5tYXAoKGRvYykgPT4gew0KICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IGRvYzsNCiAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTsNCiAgICAgICAgICByZXR1cm4geyBpZCwgLi4uZGF0YSB9Ow0KICAgICAgICB9KTsNCg0KICAgICAgICBjb25zb2xlLmxvZygiTG9hZGVkIHVzZXJzIiwgdGhpcy51c2Vycyk7DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nLiIpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBhc3luYyB1cGRhdGVBZG1pbih1c2VyKSB7DQogICAgICBjb25zdCB1c2VyUmVmID0gYXdhaXQgZmIudXNlcnNDb2xsZWN0aW9uLmRvYyh1c2VyLmlkKS51cGRhdGUoew0KICAgICAgICBhZG1pbjogIXVzZXIuYWRtaW4sDQogICAgICB9KTsNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge30sIDIwMDApOw0KICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <section id=\"users\" v-if=\"userProfile.admin\">\r\n\t\r\n\t<div class=\"limiter\">\r\n\t\t<div class=\"container-table100\">\r\n\t\t\t<div class=\"wrap-table100\">\r\n\t\t\t\t\t<div class=\"table\">\r\n\r\n\t\t\t\t\t\t<div class=\"row header\">\r\n\t\t\t\t\t\t\t<div class=\"cell\">\r\n\t\t\t\t\t\t\t\tName\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"cell\">\r\n\t\t\t\t\t\t\t\tCompany\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"cell\">\r\n\t\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t\t</div>\r\n              <div class=\"cell\">\r\n\t\t\t\t\t\t\t\tTours\r\n\t\t\t\t\t\t\t</div>\r\n              <div class=\"cell\">\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div v-for=\"user in users\" :key=\"user.id\" class=\"row\">\r\n\t\t\t\t\t\t\t<div class=\"cell\">\r\n\t\t\t\t\t\t\t\t{{user.name}}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"cell\">\r\n\t\t\t\t\t\t\t\t{{user.company}}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"cell\">\r\n\t\t\t\t\t\t\t\t<label class=\"switch\">\r\n                  <input v-if=\"user.admin\" type=\"checkbox\" checked=\"true\" @click=\"updateAdmin(user)\">\r\n                  <input v-else type=\"checkbox\" @click=\"updateAdmin(user)\">\r\n                  <span class=\"slider round\"></span>\r\n                </label>\r\n                </div>\r\n              <div class=\"cell\">\r\n                \r\n\t\t\t\t\t\t\t</div> \r\n              <div class=\"cell\">\r\n                <input type=\"image\" src=\"gear.png\" width=\"20\" height=\"20\" >\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n            \r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport moment from \"moment\";\r\nimport * as fb from \"../firebase\";\r\n\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      users: [],\r\n    };\r\n  },\r\n  mounted: function () {\r\n    this.fetchUsers();\r\n    console.info(\"mounted, users:\", this.users);\r\n  },\r\n  computed: {\r\n    ...mapState([\"userProfile\", \"users\"]),\r\n    items: function () {\r\n      return this.users;\r\n    },\r\n  },\r\n  methods: {\r\n    async fetchUsers() {\r\n      try {\r\n        const { docs } = await fb.usersCollection.get();\r\n\r\n        this.users = docs.map((doc) => {\r\n          const { id } = doc;\r\n          const data = doc.data();\r\n          return { id, ...data };\r\n        });\r\n\r\n        console.log(\"Loaded users\", this.users);\r\n      } catch (error) {\r\n        throw new Error(\"Something went wrong.\");\r\n      }\r\n    },\r\n\r\n    async updateAdmin(user) {\r\n      const userRef = await fb.usersCollection.doc(user.id).update({\r\n        admin: !user.admin,\r\n      });\r\n      setTimeout(() => {}, 2000);\r\n      window.location.reload();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n"]}]}